# 虚拟DOM

树diff的时间复杂度 o(n的三次3)
过程 1遍历tree1，第二遍历tree2 第三排序，这三个循环一组合就是 o(n的三次3)

优化时间复杂度到(O(n))
- 只同级比较，不跨级比较
- tag不相同，直接删掉重建，不再深度比较
- tag和key，两者都相同，则认为是相同节点，不再深度比较

## Diff算法 比较策略 深度优先，同层比较

snabbdom 

- 相同的vnode，（key 和 tag都相同）patch对比，不同的vnode 销毁重建


## 如何理解vue中的Diff算法？
- diff算法是虚拟DOM技术的必然产物，通过新旧虚拟DOm的对比（既Diff）将变化的地方更新在真实DOM上，另外也需要Diff高效的执行对比过程，从而降低时间复杂度O(n).
- vue2.x为了降低watcher的颗粒度，每个组件只有一个watcher，引入Diff可以精准找到DOM变化的地方。
- vue中diff执行时候组件实例执行更新函数时。它会对比上一次渲染结果oldNode和新的渲染结果newNode。此过程称为patch。
- diff过程深度优先，同层比较。两个节点之间会根据他们是否拥有子节点或者文本节点做不同操作。比较两组子节点是算法的重点。假设头尾节点可能相同做4次比对尝试。如果   没有找到相同节点才按照通用方式遍历查找。查找结束在按情况处理剩下节点，借助key通常可以精准的找到相同节点，因此整个patch过程很高效。